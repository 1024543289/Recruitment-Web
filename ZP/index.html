<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>招聘网站</title>
    <link rel="stylesheet" href="style/style.css"/>
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.css">
    <script type="text/javascript" src="./js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="./bootstrap/js/bootstrap.js"></script>
</head>
<body>
    <div class="head">
        <div class="h_c">
            <div class="hl">
                <p>北京 <span>[切换城市]</span></p>
            </div>
            <div class="hr">
                <p><a href="#">登录 / 注册</a></p>
                <p><a href="./pages/Per-center.html">个人中心 <img src="images/index/u113.png" /></a></p>
                <p><a href="#">商家中心 <img src="images/index/u113.png" /></a></p>
            </div>
        </div>
    </div>
    <div class="h_se">
        <div class="s_logo">
            <img id="u135_img" class="img " src="images/index/u135.png">
        </div>
        <div class="s_search">
            <input type="text" id="ss" />
            <input type="button" id="sb" value="搜职位" />
            <img  id="si" src="images/index/u138.png" />
        </div>
        <div class="s_fb"><img id="u148_img" class="img " src="images/index/u148.png"> 发布招聘</div>
    </div>
    <div id="index" class="hm">
        <div class="hm_1">
            <div class="hm_1_l">职位：</div>
            <div id="index_job" class="hm_1_r">
                <ul>
                    <li><a href="#"   class="s">全部</a></li>
                    <li><a href="#" >超市/零售</a>
                        <div class="ffc">
                        <img id="u197_img" class="ffimg" src="images/index/u197.png" >
                        <ul class="ff">                            
                            <li><a href="#">促销导购</a></li>
                            <li><a href="#">理货员</a></li>
                            <li><a href="#">收营员</a></li>
                            <li><a href="#">店员</a></li>
                        </ul>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="c"></div>
        </div>
        <div class="hm_1">
            <div class="hm_1_l">地点：</div>
            <div id="index_city" class="hm_1_r">
                <ul>
                    <li><a href="#"   class="s">全部</a></li>
                </ul>
            </div>
            <div class="c"></div>
        </div>
        <div class="hm_1">
            <div class="hm_1_l">福利：</div>
            <div id="index_welfare" class="hm_1_r">
                <ul>
                    <li><a href="#"   class="s">全部</a></li>
                </ul>
            </div>
            <div class="c"></div>
        </div>
        <div class="hm_1 b">
            <div class="hm_1_l">已选：</div>
            <div class="hm_1_r">
                <div class="yx">超市/零售 - 收营员 <img id="u192_img" class="img " src="images/index/u192.png"></div>
            </div>
            <div class="c"></div>
        </div>
    </div>
    <!-- 模态框开始 -->
    <div class="modal fade" id="ApplyModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">报名信息</h5>
            <button type="button" class="close" data-dismiss="modal">
              <span>&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <!-- 表单开始 -->
              <form id="jobhunter_apply_form">
                <!-- employmentId -->
                <input type="hidden" name="employmentId">
                <!-- 第一行 -->
                <div class="form-group row">
                  <!-- 用户名 -->
                  <label for="input_username" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">用&nbsp;户&nbsp;名&nbsp; :</label>
                  <div class="col-4">
                    <input id="input_username" name="username" class="form-control" type="text" placeholder="请输入用户名">
                  </div>
                  <!-- 密码 -->
                  <label for="input_password" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">密&emsp;&emsp;码 :</label>
                  <div class="col-4">
                    <input id="input_password" name="password" class="form-control" type="text" placeholder="请输入密码">
                  </div>
                </div>
                <!-- 第二行 -->
                <div class="form-group row">
                  <!-- 姓名 -->
                  <label for="input_realname" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">姓&emsp;&emsp;名 :</label>
                  <div class="col-4">
                    <input id="input_realname" name="realname" class="form-control" type="text" placeholder="请输入姓名">
                  </div>
                  <!-- 性别 -->
                  <label for="input_gender" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">性&emsp;&emsp;别 :</label>
                  <div class="col-4">
                    <select name="gender" id="select_gender" class="form-control">
                      <option value="男">男</option>
                      <option value="女">女</option>
                    </select>
                  </div>
                </div>
                <!-- 第三行 -->
                <div class="form-group row">
                  <!-- 出生日期 -->
                  <label for="input_birth" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">出生日期 :</label>
                  <div class="col-4">
                    <input id="input_birth" name="birth" class="form-control" type="text" placeholder="请输入出生日期">
                  </div>
                  <!-- 学历 -->
                  <label for="select_education" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">学&emsp;&emsp;历 :</label>
                  <div class="col-4">
                    <select name="education" id="select_education" class="form-control">
                      <option value="博士">博士</option>
                      <option value="硕士">硕士</option>
                      <option value="本科">本科</option>
                      <option value="专科">专科</option>
                    </select>
                  </div>
                </div>
                <!-- 第四行 -->
                <div class="form-group row">
                  <!-- 工作时间 -->
                  <label for="input_workTime" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">工作时间 :</label>
                  <div class="col-4">
                    <input id="input_workTime" name="workTime" class="form-control" type="text" placeholder="请输入工作时间">
                  </div>
                  <!-- 联系电话 -->
                  <label for="input_telephone" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">联系电话 :</label>
                  <div class="col-4">
                    <input id="input_telephone" name="telephone" class="form-control" type="text" placeholder="请输入联系电话">
                  </div>
                </div>
                <!-- 第五行 -->
                <div class="form-group row">
                  <!-- 简历 -->
                  <label for="input_resume" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">简&emsp;&emsp;历 :</label>
                  <div class="col-4">
                    <input id="input_resume" name="resume" class="form-control" type="text" placeholder="请上传简历">
                  </div>
                  <!-- 求职状态 -->
                  <label for="select_currentStatus" class="col-2 text-right" style="margin-bottom:0;line-height:38px;">求职状态 :</label>
                  <div class="col-4">
                    <select name="currentStatus" id="select_currentStatus" class="form-control">
                      <option value="求职中">求职中</option>
                      <option value="求职完毕">求职完毕</option>
                    </select>
                  </div>
                </div>
              </form>
          <!-- 表单结束 -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            <button type="button" class="btn btn-primary" onclick="submitJobhunterData()">提交</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 模态框结束 -->
    <div id="con_menu">
        <div class="m">
            <h4>190/天上一休一连锁超市急招营业员</h4>
            <div class="m_1">4000-5000 元/月</div>
            <div class="w">
            <div class="m_2 c1">五险一金</div>
            <div class="m_2 c2">包吃</div>
            <div class="m_2 c3">包住</div>
            </div>
            <div class="m_9">
                <p>工作时间：全职工作</p>
                <p>工作类型：收银员</p>
                <p>招聘人数：10人</p>
                <p>工作地点：海淀知春路</p>
            </div>
            <div class="m_3">一键报名</div>
        </div>
    </div>

    <div class="ym">
        <ul>
            <li>&lt;</li>
            <li>1</li>
            <li>2</li>
            <li>...</li>
            <li>10</li>
            <li>&gt;</li>
        </ul>
    </div>
    <div class="f" style=" border:1px solid #999;">
        ©2015-2019 ####################有限公司 ##ICP备#############号 ##公网安备###############号 联系电话：####-###########
    </div>
    <script>
        
        //声明后台接口IP
        var baseURL = "http://203.195.246.58:7777";
        //初始化职位信息，将每个职位显示在首页上------
        function relodeJob(){
            var url = baseURL + "/JobType/findAll";
            $.get(url,function(result){
                var arr = [];
                result.data.forEach(function(item){
                    arr.push(item.name);
                });
                //自定义数组去重函数
                Array.prototype.myInfo = function(){
                    var newArr = [];
                    for(var i=0;i<arr.length;i++){
                        var a = newArr.indexOf(arr[i]);
                        if(a == -1){
                            newArr[newArr.length] = arr[i];
                        }
                    }
                    return newArr;
                }
                var result = arr.myInfo();
                result.forEach(function(item){
                    //判断item不为空且不为null的话，再追加
                    if(item != null && item != ''){
                        $(`<li><a href="#">`+item+`</a></li>`).appendTo($("#index_job ul"))
                    }
                })
            })
        }
        //初始化省份--------------------------------
        var baseURL = "http://203.195.246.58:7777";
        function relodeCity(){
            var url = baseURL + "/Province/findAll";
            $.get(url,function(result){
                var arr = [];
                result.data.forEach(function(item){
                    arr.push(item.name);
                })
                //自定义数组去重函数
                Array.prototype.myInfo = function(){
                    var newArr = [];
                    for(var i=0;i<arr.length;i++){
                        var a = newArr.indexOf(arr[i]);
                        if(a == -1){
                            newArr[newArr.length] = arr[i];
                        }
                    }
                    return newArr;
                }
                var result = arr.myInfo();
                result.forEach(function(item){
                    //判断item不为空且不为null的话，再追加
                    if(item != null && item != ''){
                        $(`<li><a href="#">`+item+`</a></li>`).appendTo($("#index_city ul"))
                    }
                })
            })
        }
         //初始化福利信息,--------------------------
        function relodeWelfare(){
            var url = baseURL + "/Welfare/findAll";
            $.get(url,function(result){
                var arr = [];
                result.data.forEach(function(item){
                    arr.push(item.name);
                })
                 //自定义数组去重函数
                Array.prototype.myInfo = function(){
                    var newArr = [];
                    for(var i=0;i<arr.length;i++){
                        var a = newArr.indexOf(arr[i]);
                        if(a == -1){
                            newArr[newArr.length] = arr[i];
                        }
                    }
                    return newArr;
                }
                var result = arr.myInfo();
                result.forEach(function(item){
                    //判断item不为空且不为null的话，再追加
                    if(item != null && item != ''){
                        $(`<li><a href="#">`+item+`</a></li>`).appendTo($("#index_welfare ul"))
                    }
                })
            })
        }
        //初始化招聘信息------------------------------
        function relodeEmploymentData(){
            var url = baseURL+"/Employment/findAll";
            $.get(url,function(result){
                result.data.forEach(function(item){
                    $(`
                        <div class="m">
                            <input type="hidden" name="id" value="`+item.id+`" />
                            <h4>`+item.title+`</h4>
                            <div class="m_1">`+item.salary+`</div>
                            <div class="w">
                                <div class="m_2 c1">`+item.welfare+`</div>
                                <div class="m_2 c2">包吃</div>
                                <div class="m_2 c3">包住</div>
                            </div>
                            <div class="m_9">
                                <p>工作时间：`+item.workingHours+`</p>
                                <p>工作类型：`+item.job+`</p>
                                <p>招聘人数：`+item.num+`</p>
                                <p>工作地点：`+item.province+`:`+item.city+`</p>
                                <p>联系人：`+item.contactName+`</p>
                                <p>联系电话`+item.contactPhone+`</p>
                            </div>
                            <div class="m_3" onclick="SignUp.call(this)">一键报名</div>
                        </div>
                    `).appendTo($("#con_menu"));
                })
            })
        }
        //点击表单中提交按钮，将表单数据保存到后台
        function submitJobhunterData(){
            var url = baseURL+"/Jobhunter/quickRegistration";
            //获取表单内，求职者填写的信息
            var employmentId = $("#jobhunter_apply_form input[name=employmentId]").val();
            var username = $("#jobhunter_apply_form input[name=username]").val();
            var password = $("#jobhunter_apply_form input[name=password]").val();
            var realname = $("#jobhunter_apply_form input[name=realname]").val();
            var gender = $("#jobhunter_apply_form select[name=gender]").val();
            var birth = $("#jobhunter_apply_form input[name=birth]").val();
            var education = $("#jobhunter_apply_form select[name=education]").val();
            var workTime = $("#jobhunter_apply_form input[name=workTime]").val();
            var telephone = $("#jobhunter_apply_form input[name=telephone]").val();
            var resume = $("#jobhunter_apply_form input[name=resume]").val();
            var currentStatus = $("#jobhunter_apply_form select[name=currentStatus]").val();
            //将获取的数据封装在data中
            var data;
            data = {
                employmentId:employmentId,
                username:username,
                password:password,
                realname:realname,
                gender:gender,
                birth:birth,
                education:education,
                workTime:workTime,
                telephone:telephone,
                resume:resume,
                currentStatus:currentStatus
            }
            //与后台报名接口交互
            $.post(url,data,function(result){
                if(result.status === 200){
                    alert(result.message)
                    //提交成功后，关闭模态框
                    $("#ApplyModal").modal("hide");
                } else{alert(result.message)}
            })
        }
        //点击“一键报名”按钮，打开模态框
        function SignUp(){
            var id = $(this).parents("div.m").find("input[name=id]").val();
            $("#jobhunter_apply_form input[name=id]").val(id);
            $("#ApplyModal").modal("show");
        }
        //页面加载完毕后-------------------------------------------------------------------
        $(function(){
            relodeJob();
            relodeCity();
            relodeWelfare();
            relodeEmploymentData();
            //监听"一键报名"，模态框关闭后，初始化模态框内的表单
            $("#ApplyModal").on('hidden.bs.modal',function(e){
                $(this).find("form")[0].reset();
                $("input[name=employmentId]").val("");
            })
            // 鼠标点击li变色
            $('#index').on('click','li',function(){
                $(this).addClass('current');
                $(this).siblings().removeClass('current');
            });
            //1.职位索引
        })
    </script>
</body>
</html>